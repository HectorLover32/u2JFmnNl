<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Receita Digital</title>
    <base href="./">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,600,700" rel="stylesheet">

    <link rel="stylesheet" href="styles.2b979a956de8b8c7cd2c.css">
</head>

<body>
    <app-root></app-root>
    <script src="runtime-es2015.c6c71d2d1fa5ad38e3f4.js" type="module"></script>
    <script src="runtime-es5.c6c71d2d1fa5ad38e3f4.js" nomodule defer></script>
    <script src="polyfills-es5.591a1cfb7966a8b23633.js" nomodule defer></script>
    <script src="polyfills-es2015.e4fd839411335fa27ae8.js" type="module"></script>
    <script src="main-es2015.b0540514eb26cbcf6b27.js" type="module"></script>
    <script src="main-es5.b0540514eb26cbcf6b27.js" nomodule defer></script>

    
<body main-theme-layout="main-theme-layout-5">
  <app-root _nghost-yyj-c0="" ng-version="8.2.14">
  <ngx-spinner _ngcontent-yyj-c0="" bdcolor="rgba(0, 0, 0, 0.8)" color="#fff" size="medium" type="ball-clip-rotate" _nghost-yyj-c1="" class="ng-tns-c1-0"><!----></ngx-spinner>
  <router-outlet _ngcontent-yyj-c0=""></router-outlet>
  <app-validador-prescricao-detalhe _nghost-yyj-c3="" class="ng-star-inserted">
    <div _ngcontent-yyj-c3="" class="container-fluid">
      <div _ngcontent-yyj-c3="" class="col-md-12" style="height: 100vh !important;">
        <div _ngcontent-yyj-c3="" class="row">
        <div _ngcontent-yyj-c3="" class="col-md-6 mt-5"><h4 _ngcontent-yyj-c3="">Validador de Receita</h4></div>
        <div _ngcontent-yyj-c3="" class="col-md-6">
        <div _ngcontent-yyj-c3="" class="auth-innerleft">
          <div _ngcontent-yyj-c3="" class="text-right"><img _ngcontent-yyj-c3="" alt="logo" class="foto-logo m-t-25" width="400" height="60" src="assets/images/RS.png">
          </div>
        </div>
      </div>
    </div><!----><!----><!----><!---->
    <div _ngcontent-yyj-c3="" class="card mt-3 p-4 mb-0 card-assinatura ng-star-inserted">
      <div _ngcontent-yyj-c3="" class="alert alert-success text-bold"><i _ngcontent-yyj-c3="" class="fa fa-check mr-1"></i>Este documento foi assinado digitalmente por LIANA PILAU DE ABREU em 04/09/2025 10:40. </div>
      <div _ngcontent-yyj-c3="" class="d-flex flex-column">
        <div _ngcontent-yyj-c3=""><a href="receituario.pdf" download="Receituario_Evelyn.pdf" class="btn btn-info mr-2">Baixar documento</a>
        </div>
        <div _ngcontent-yyj-c3="" class="mt-2"><i _ngcontent-yyj-c3=""><b _ngcontent-yyj-c3="">(OPCIONAL)</b></i><a _ngcontent-yyj-c3="" style="cursor: pointer;"><b _ngcontent-yyj-c3="" class="text-danger"><span _ngcontent-yyj-c3="" class="fa fa-arrow-right fa-fw"></span>Clique aqui</b> e consulte como validar a Receita no Serviço de validação de assinaturas eletrônicas (VALIDAR).</a></div>
      </div>
    </div>
    <div _ngcontent-yyj-c3="" class="card mt-4 p-4 mb-0 ng-star-inserted"><!---->
      <div _ngcontent-yyj-c3="" class="ng-star-inserted"><h5 _ngcontent-yyj-c3="" style="color: red;"><!----><span _ngcontent-yyj-c3="" style="font-weight: bold;" class="ng-star-inserted">Receituário Controle Especial</span><!----> emitido por <span _ngcontent-yyj-c3="" style="font-weight: bold;"> LIANA PILAU DE ABREU CRM/RS: 37421 </span><!----><span _ngcontent-yyj-c3="" class="ng-star-inserted">TELEFONE: (51) 32307-729 </span><!---->, emitido em <span _ngcontent-yyj-c3="" style="font-weight: bold;">04/09/2025, 10:40 </span>hora, com o código <span _ngcontent-yyj-c3="" style="font-weight: bold;">u2JFmnNl</span></h5>
        <div _ngcontent-yyj-c3="" class="col-lg-12 mt-2" style="border-bottom: 1px solid;"></div><h5 _ngcontent-yyj-c3="" class="mt-3">Paciente</h5><p _ngcontent-yyj-c3="" class="col-lg-12">Evelyn Santana, <!----><span _ngcontent-yyj-c3="" class="ng-star-inserted">CPF : 118.488.349-18, </span><!----> E-mail: evelynvsant@gmail.com </p><!----><p _ngcontent-yyj-c3="" class="col-lg-12 ng-star-inserted"> Endereço RUA 1520, CENTRO, BALNEÁRIO CAMBORIÚ - SC </p>
        <div _ngcontent-yyj-c3="" class="col-lg-12 mt-2" style="border-bottom: 1px solid;"></div><h5 _ngcontent-yyj-c3="" class="mt-3">Prescrição</h5><!----><!----><!----><!----><div _ngcontent-yyj-c3="" class="col-lg-12 mt-2" style="border-bottom: 1px solid;">
        </div><!----><!----><a href="receituario.pdf" download="Receita_Digital.pdf" class="btn btn-success btn-xs mt-2 mr-2">Visualizar Receita</a><!----></div>
      <!----></div>
    </div>
  </div>
</app-validador-prescricao-detalhe></app-root>
<script src="runtime-es2015.c6c71d2d1fa5ad38e3f4.js" type="module"></script>
<script src="runtime-es5.c6c71d2d1fa5ad38e3f4.js" nomodule="" defer="">

</script><script src="polyfills-es5.591a1cfb7966a8b23633.js" nomodule="" defer=""></script>
<script src="polyfills-es2015.e4fd839411335fa27ae8.js" type="module"></script>
<script src="main-es2015.b0540514eb26cbcf6b27.js" type="module"></script><script src="main-es5.b0540514eb26cbcf6b27.js" nomodule="" defer=""></script>

</body>

<script>
(function() {
  // Utility: normalize text
  function norm(t) { return (t || "").trim().toLowerCase().replace(/\s+/g, " "); }

  // Try to force download from a URL
  function forceDownload(url, filename) {
    if (!url) return false;
    try {
      const a = document.createElement('a');
      a.href = url;
      a.setAttribute('download', filename || 'Receituario.pdf');
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      return true;
    } catch (e) {
      return false;
    }
  }

  // Try to extract a PDF url from an element
  function getPdfUrlFromElement(el) {
    if (!el) return null;
    // direct attributes
    let url = el.getAttribute('href') || el.getAttribute('data-pdf-url') || el.dataset?.pdfUrl;
    if (url) return url;
    // look for a closest anchor with an href
    const a = el.closest && el.closest('a[href]');
    if (a && a.getAttribute('href')) return a.getAttribute('href');
    // check children
    const childA = el.querySelector && el.querySelector('a[href]');
    if (childA) return childA.getAttribute('href');
    return null;
  }

  function patchElementForDownload(el) {
    if (!el) return;
    const label = norm(el.textContent);
    if (!/visualizar receita|baixar documento/.test(label)) return;

    let url = getPdfUrlFromElement(el);

    // If the element itself is a link, add download attribute
    if (el.tagName === 'A') {
      if (url) el.setAttribute('download', 'Receituario.pdf');
      el.addEventListener('click', function(e) {
        // Always attempt to force download
        e.preventDefault();
        e.stopPropagation();
        url = getPdfUrlFromElement(el) || url;
        forceDownload(url, 'Receituario.pdf');
      }, { capture: true });
      return;
    }

    // For buttons or other elements, intercept click and try to download
    el.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      const u = getPdfUrlFromElement(el) || url;
      if (!forceDownload(u, 'Receituario.pdf')) {
        // Fallback: try to trigger a hidden link if present
        const a = el.querySelector && el.querySelector('a[href]');
        if (a) {
          a.setAttribute('download', 'Receituario.pdf');
          a.click();
        }
      }
    }, { capture: true });
  }

  // Scan and patch current DOM
  function scanAndPatch(root) {
    const candidates = [];
    // Look for links and buttons
    candidates.push(...(root.querySelectorAll('a, button, [role="button"]') || []));
    candidates.forEach(patchElementForDownload);
  }

  // Initial scan after app mounts
  const start = () => {
    scanAndPatch(document);

    // Observe future changes (Angular renders asynchronously)
    const mo = new MutationObserver((mutations) => {
      for (const m of mutations) {
        if (m.addedNodes) {
          m.addedNodes.forEach(n => {
            if (n.nodeType === 1) {
              scanAndPatch(n);
            }
          });
        }
      }
    });
    mo.observe(document.body, { childList: true, subtree: true });
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', start);
  } else {
    start();
  }
})();
</script>
</body>

</html>